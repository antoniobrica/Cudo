FROM node:14.15-alpine
WORKDIR /usr/src/app
RUN groupadd -r www && useradd --no-log-init -r -g www www
RUN chown www:www /usr/src/app -R
COPY package.json ./
RUN npm install
RUN npm i apollo-server-express @nestjs/platform-express mssql
COPY . .
ENV NODE_ENV=production
ENV PORT=8080
USER www
EXPOSE 8080
CMD ["node" , "main.js"]

